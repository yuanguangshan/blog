---
title: 群晖 quickconnect 连接
date: 2023-09-08T19:29:00+08:00
categories: [收藏]
tags: [精品]
---

英文文档官网有 我估计也没多少人会去看，所以翻译过来看下这不算黑科技的科技

这篇文章也是我年前翻译了几天完成的 （包括图片上的内容也做了翻译）

还顺便学习了下PS怎么用，然后发现仿制图章工具真的是神器
我觉得这篇白皮书详细介绍了quickconnect的运作原理，可以消除网上小白们互相流传的谬论了。直连，打洞，中转，目前访问服务器的方法基本也就这几种，顺便对于非群晖用户来说，类似quickconnect服务器的功能其实可以自己建立，只要有Linux基础的用户来说是非常方便的，github上有开源的项目，自己买vps做一个中转即可。没技术的用户，那就只能花钱买服务，国内类似的中转服务有花生壳，nat123等。关于打洞这个东西，似乎花生壳曾经有过这个功能，但是现在似乎取消了，nat123我记得还是有的，打洞就是有一定的失败率，随着nat层数的增高，失败率也随之增大。

---------------------------------------------------------------------------------

什么是QuickConnect快速连接？
正如它的名字，QuickConnect快速连接，它使得连接群晖NAS服务器变得方便快捷。通常来说，建立一台服务器并准确部署服务通常需要有一定的IT知识水平。QuickConnect的目的是扔掉这些IT知识需求，通过一些技术手段减少网络费用开销，使连接群晖NAS服务器对每个人来说变得毫不费力。

这意味着QuickConnect消除了部署服务器时候会遇到的一些障碍。也就是说，QuickConnect的用户不再需要拥有一个静态的外部IP地址，也不用在NAS之前的NAT设备上做转发规则，也不再需要在客户机的位置改变时切换wan地址和lan地址。

蜜色橙汁友情提醒：一般来说NAT设备是指路由，防火墙，及某些集成路由功能的光猫一体机

QuickConnect的设计是确保无论用户处在什么网络环境下，即使是没有设置端口转发，都能访问到特定的NAS服务。 现在，它提供了一个全面的解决方案，以保证不仅是服务始终可以访问，而且不会给你造成烦恼和额外网络费用开销。
快速连接提供了以下功能：
1.永久的和容易记忆的服务器ID ---- 一个QuickConnect的ID – 无论在lan还是在wan都能正常工作
2.服务器位置检测（LAN / WAN检测）
3. QuickConnect打孔
4. 通过UPnP自动端口转发
5. QuickConnect中继服务
6. QuickConnect网页访问

有了这些功能，QuickConnect用户享受各种专享服务，其中包括：
• 个性化服务器ID
• 在任何地方任何网络环境下访问，

• 保证客户设备通过的QuickConnect始终以最短的路径访问NAS

QuickConnect的工作原理
概述
快速连接，一般提供三种不同的服务：移动和PC客户端程序的访问，QuickConnect网页门户，和DSM文件共享。 所有这些服务需要QuickConnect的连通性测试，以保证高效连接。 在本章中，我们将解释QuickConnect的连通性测试如何工作以及这三个服务分别提供的功能。

QuickConnect的连通性测试
QuickConnect 的连通性测试是一系列的尝试定义如何使用快速连接ID在客户端连接到其目标NAS。 它首先通过QuickConnect服务器上注册的网络地址进行LAN和WAN的检测，以验证服务器的可访问性，然后根据群晖NAS所处的网络环境来测试 是否适合打洞，如之前所述方法都不可访问到NAS的话最后将会提供中继服务。
LAN / WAN检测
当客户端试图使用服务器的快速连接ID来访问群晖NAS，一个请求会被发送到

群 晖QuickConnect服务器来注册NAS的信息。这使得客户端可以获取网络信息，以确定服务器的可能的连接方式。 这些信息包括公网IP，局域网IP ，和NAT类型和其他一些信息。所有这些都是必要的环节并且不会损害到NAS的安全性。 用这些给定的信息，客户端可以识别在LAN或WAN中，是否可以建立IP地址或域名地址的直接连接。

QuickConnect的打洞
如果不能建立直接连接，客户端将试图建立NAS与客户机之间的虚拟隧道并通过QuickConnect建立临时直接链接来进行数据传输。 该技术使得服务器和客户端之间的网络同步性能与通过WAN IP或是DDNS直连有着十分相似的体验,而不需要物理上具有WAN IP或是DDNS这样的网络环境。

打洞的工作原理是借由QuickConnect的辅助服务器,客户机发起虚拟隧道到NAS

1. NAS发送一个请求到QuickConnect服务器，并保持开放端口 ---- NAS发送请求时会在NAT设备前打开个随机端口 – 保持开放以接受打洞请求。
2.类似地，客户机发出一个请求到QuickConnect服务器时会在客户端NAT设备前创建另一个端口
3. QuickConnect服务器将提供NAS的端口信息到客户端，反之亦然。
4. NAS会通过客户端这边打开的洞尝试建立到客户机的连接。
5.一旦客户端接收从NAS打洞请求，会发回一个打洞响应,经由在NAS侧的打开的洞返回给NAS。
6.如果打洞响应到达NAS，虚拟隧道创建成功。

图1：QuickConnect的打洞机制

对于打洞的有关技术，可以自行google：TCP 打洞

一旦虚拟隧道建立成功，远程客户端可以使用此连接直接与NAS通信而不需要网络中继。

QuickConnect中继服务
在 不能创建虚拟隧道的情况下，数据传输可以通过中继服务来进行。当流量转发时，它到达目的地之前要经过Synology的中继服务器。相比直接连接或 Quickconnect打洞来说，中继需要更多的时间，Quickconnect中继服务充当数据到NAS与客户端之间传输的最后一个选择。

如果打洞无法创建一个连接，客户端会做最后一次尝试连接，通过创建使用Quickconnect中继服务的虚拟网络隧道。该服务工作如下：
1.要启动中继服务，客户端会发送一个请求到Quickconnect服务器。
2.Quickconnect服务器将通知NAS创建NAS和中继服务器之间的虚拟通道。
3.中继服务器分配一个端口，所有通往这个端口的网络流量被重定向到之前建立的虚拟隧道,然后通往NAS。
4.一旦中继服务器准备就绪，Quickconnect服务器将回复中继信息给客户端。
5.客户端现在能够经由中继与NAS进行通信。

图2：Quickconnect中继服务

之前折腾了下发现群晖的中继服务器去年开始是扔在北京的多线BGP线路的服务器上,


终于在墙内了

Quickconnect服务
Quickconnect对于不同的Synology应用提供量身定做的服务：手机和PC客户端程序的访问，Quickconnect门户网站，和DSM文件共享。这些应用程序都使用Quickconnect不同的优势为客户提供同样的便利和效益。

移动和PC程序的访问

Quickconnect 允许Synology客户端软件，如群晖CloudStation（PC工具）和移动应用，如DS file中使用QuickConnect的ID，而不是IP地址/ DDNS来访问Synology网络。这样一来，Quickconnect可以让客户端电脑或移动设备通过局域网，广域网，打洞或中继方式来访问NAS。

图3：移动和电脑程序通过QuickConnect访问NAS的工作流程

QuickConnect的门户网站
QuickConnect的门户网站允许Synology网络的Web界面 - 包括DSM管理界面，使用PhotoStation和各种应用门户 - 提供一致的，可收藏地址的任何地方的浏览器访问。

搭载QuickConnect的门户网站的DSM管理界面的典型地址如下所示：
quickconnect.to/[QuickConnect ID]
例如quickconnect.to/tenni
一个Photo Station地址将如下所示：
quickconnect.to/[QuickConnect ID] /photo

例如quickconnect.to/tenni/photo

应用程序别名需要DSM应用门户与QuickConnect地址进行访问。一个典型的File Station的应用门户地址是这样的：
quickconnect.to/[QuickConnect ID] / [别名]

例如quickconnect.to/tenni/file

这些地址都是可被访问的的。当快速连接服务器收到这些地址的请求，这将启动连接测试，以验证NAS的位置和可用性。当QuickConnect的浏览器未能重定 向到一个局域网或广域网地址的情况下，群晖科技提供QuickConnect门户服务器，相当于一台Synology NAS和连接的网络浏览器之间的代理。

连接性测试有助于浏览器以最好的方式重定向到所需访问的网页。例如，如果这些地址是可连接，门户服务器将重定向客户端浏览器到LAN地址（例如http://192.168.17.99:5000/）或广域网地址（例如http://tenni.synology.me:5000）。

当连接客户端尝试通过HTTPS连接这些网络接口（例如https://quickconnect.to/tenni），它会提示信任NAS服务器的证书（通常是自签名的个人NAS）。当客户端浏览器选择信任证书，则被重定向到LAN地址。如果不是，则中继门户将被激活，所有的数据将被中继。

下图说明了使用QuickConnect门户网站的过程：

图4：QuickConnect网络门户

1.（连接网络浏览器）客户端进行连接测试
2. 如果局域网/广域网连接测试的结果是“否” 浏览器会被重定向到QuickConnect门户服务器，
3.QuickConnect门户服务器调用中继服务器到NAS虚拟网络通道
4，QuickConnect门户服务器用作代理服务器通过虚拟网络通道来处理NAS与客户端浏览器之间的所有流量。
5.客户端浏览器现在可以通过QuickConnect门户服务器的访问预定的NAS网页

图6：通过QuickConnet访问文件共享链接的工作流程
支持的服务
支持的服务如下
打洞功能目前支持CloudStation和相应的移动应用程序。有关详情请咨询各移动应用程序的发布说明

软件安全
Synology QuickConnect 在提供的所有优势与便利的同时，采取一切必要的措施，防止数据泄漏和拦截。本节介绍QuickConnect的安全协议。
Synology网络信息
要启用快速连接的服务，Synology NAS必须在QuickConnect服务器下注册。这意味着Synology NAS会向Synology报告网络环境和支持服务以供QuickConnect服务器。

该报告的信息（即公网IP地址，网卡地址，NAT类型等）对于连接测试是不可缺少的。群晖科技保障用户的数字隐私权。所检索的信息只为了提供所述QuickConnect服务所使用。

中继隧道
如果启用了SSL，网络上的虚拟通道数据传输有着终端到终端的加密。因此，QuickConnect保证Synology网络和客户端设备之间的数据传输的完整性和机密性。

QuickConnect的门户网站
QuickConnect的门户网站是由终端到终端的加密保护，当浏览器使用LAN或WAN连接重定向至Synology NAS。否则，该请求被定向到门户服务器。

在这样的情况下，门户服务器提供的连接器来验证门户服务器的身份可信证书。这有助于我们打击中间人攻击，防止被截获假冒门户网站服务器的消息。

门户服务器然后将解密并修改特定HTTP标头，从而通知的连接的客户端的身份的目的地的NAS。这样做之后，门户服务器然后经由网络虚拟隧道将数据发送到目的地Synology网络。如果启用了SSL，在网络上的虚拟通道数据传输再次有着终端到终端的加密，。

图7：QuickConnect的门户网站的安全机制
为了提供所承诺的服务，QuickConnect不使用从注册的Synology NAS服务器所收集的数据，除非提供此类承诺的服务。欲了解更多详情，请浏览隐私条款上我们的官方网站。

设施安全
群晖科技QuickConnect的服务器是托管在数据中心中，共有全球各地的客户提供高品质，稳定的服务八个站点。所有的数据中心每天24小时有人值班，看守与监控系统和严格的政策管理人员出入。设施也齐全，以确保在停电和预防灾害的情况下，电源和网络的可用性。

概要
使 用Synology QuickConnect的服务，用户现在可以享受随时随地不仅访问存储在一台Synology NAS数据，也可以从任何网络环境中访问web管理界面。消除跨网络连接端口转发和防火墙规则的复杂的设置，群晖科技QuickConnect使这一切成 为可能的一个简单的，个性化的QuickConnect ID和引导连接设备在整个网络中的最短路线到目的地NAS。

------------------------------------------------------------------------------------------------------

同性♂千人♂交友♂群还是要宣传一下的

虽然群名字是群晖NAS ，但是已经很少谈论该话题了~~

♂♂♂
广招各种玩XBMC，Emby，Plex的媒体库管理用户。
最后晒群里之前黑五的一些开箱

未经授权，不得转载
